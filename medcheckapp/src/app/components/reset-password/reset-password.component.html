<div class="login-wrapper d-flex align-items-center justify-content-center min-vh-100 py-4">
  <div class="card login-card shadow border-0 w-100 mx-3" role="main">
    <div class="row g-0 h-100">
  <div class="col-md-6 d-flex align-items-center justify-content-center p-4 border-end logo-pane">
        <img src="/assets/logo.png" alt="MedCheck Logo" class="img-fluid logo-img" loading="lazy">
      </div>
      <div class="col-md-6 d-flex flex-column p-4 p-md-5 form-pane">
        <div class="mb-4">
          <h2 class="h5 fw-bold mb-0 text-uppercase text-center text-md-start">Redefinir Senha</h2>
        </div>
        <ng-container *ngIf="!done; else doneTpl">
          <div class="mb-3 position-relative password-wrapper">
            <label class="form-label small fw-semibold">Nova senha</label>
            <input [type]="showPassword ? 'text' : 'password'" class="form-control pe-5" [(ngModel)]="password" name="password" (input)="onPasswordInput()" placeholder="Digite a nova senha" autocomplete="new-password">
            <button type="button" class="btn btn-sm btn-link password-toggle" (click)="toggleShow('p')" tabindex="-1" aria-label="Mostrar ou ocultar senha">
              <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
            </button>
            <div class="progress mt-2 strength-bar" style="height:6px;">
              <div class="progress-bar" [style.width]="strength+'%'" [class.bg-danger]="strength<40" [class.bg-warning]="strength>=40 && strength<70" [class.bg-success]="strength>=70"></div>
            </div>
          </div>
          <div class="mb-4 position-relative password-wrapper">
            <label class="form-label small fw-semibold">Confirmar senha</label>
            <input [type]="showConfirm ? 'text' : 'password'" class="form-control pe-5" [(ngModel)]="confirmPassword" name="confirmPassword" placeholder="Repita a senha" autocomplete="new-password">
            <button type="button" class="btn btn-sm btn-link password-toggle" (click)="toggleShow('c')" tabindex="-1" aria-label="Mostrar ou ocultar senha">
              <i class="bi" [ngClass]="showConfirm ? 'bi-eye-slash' : 'bi-eye'"></i>
            </button>
          </div>
          <div class="d-flex gap-2">
            <button class="btn btn-primary btn-sm" (click)="submit()" [disabled]="submitting">{{ submitting? 'Enviando...' : 'Salvar' }}</button>
            <a routerLink="/login" class="btn btn-outline-secondary btn-sm">Cancelar</a>
          </div>
        </ng-container>
        <ng-template #doneTpl>
          <div class="alert alert-success small">Senha redefinida com sucesso. Redirecionando...</div>
          <a routerLink="/login" class="btn btn-primary btn-sm">Ir para Login agora</a>
        </ng-template>
      </div>
    </div>
  </div>
</div>
