<div class="settings-wrapper py-3 py-md-4">
  <div class="settings-card glass-box mx-auto animate-fade-slide">
    <div class="settings-head d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4">
      <div class="d-flex align-items-center gap-3">
        <div class="icon-circle shadow-sm"><i class="bi bi-sliders"></i></div>
        <div>
          <h5 class="m-0 fw-semibold">Configurações</h5>
          <div class="subtitle small text-muted">Gerencie seus dados e preferências</div>
        </div>
      </div>
      <!-- Botão de salvar no header removido para unificação -->
    </div>
    <div class="row g-4">
      <div class="col-12 col-lg-4">
        <div class="avatar-block d-flex flex-column align-items-center text-center p-3 p-md-4 h-100">
          <div class="avatar-shell position-relative mb-3">
            <div class="avatar ring d-flex align-items-center justify-content-center overflow-hidden" [class.has-photo]="photoUrl">
              <img *ngIf="photoUrl" [src]="photoUrl" alt="Foto de perfil" />
              <i *ngIf="!photoUrl" class="bi bi-person"></i>
            </div>
            <label class="change-photo-btn" title="Alterar foto">
              <i class="bi bi-camera"></i>
              <input type="file" accept="image/*" (change)="onFileSelected($event)" hidden />
            </label>
          </div>
          <!-- Remoção desabilitada por regra: apenas troca de foto permitida -->
          <div class="small text-muted">Clique no ícone da câmera para trocar sua foto.</div>
          <div class="mt-3 small status-msg" [class.text-success]="msg.includes('salv') || msg.includes('Foto')" [class.text-danger]="msg.startsWith('Falha')">{{ msg }}</div>
        </div>
      </div>
      <div class="col-12 col-lg-8">
        <div class="form-section p-3 p-md-4 h-100">
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <label class="form-label field-label">Telefone</label>
              <div class="input-wrapper">
                <i class="bi bi-telephone inbound"></i>
                <input class="form-control" [(ngModel)]="phone" appMask="phone" placeholder="(00) 00000-0000" required />
              </div>
              <div class="form-hint small text-muted mt-1">Use DDD + número (somente dígitos).</div>
            </div>
          </div>
          <div class="mt-4 text-end">
            <button class="btn btn-primary px-4" type="button" (click)="save()" [disabled]="saving || !phoneDigitsCount">
              <ng-container *ngIf="!saving; else savingTpl">
                <i class="bi bi-save me-1"></i>Salvar
              </ng-container>
            </button>
            <ng-template #savingTpl>
              <span class="d-inline-flex align-items-center gap-2"><span class="spinner-border spinner-border-sm"></span> Salvando...</span>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
