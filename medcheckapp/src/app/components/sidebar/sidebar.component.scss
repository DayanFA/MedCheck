@use 'sass:color';

// Sidebar container
.sidebar {
  width: 250px;
  background: #fff; /* mant√©m cor atual */
  padding: 1.1rem 1.1rem .85rem;
  box-shadow: 2px 0 6px rgba(0,0,0,.06);
  border-right: 1px solid #e5e7eb;
  height: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
  transition: width .28s ease, background .3s ease;
}

// Collapsed state (applied by host element adding .collapsed class)
:host(.collapsed) .sidebar { width: 78px; }
:host(.collapsed) .sidebar .brand-text,
:host(.collapsed) .sidebar .nav-link span { display: none; }
:host(.collapsed) .sidebar .divider { margin: .25rem 0 .75rem; }

// Branding
.brand-logo { width: 54px; height: auto; object-fit: contain; }
.divider { margin: .35rem 0 1rem; border-color: #e5e7eb; }

// Nav links
.nav-link {
  position: relative;
  color: #374151;
  border-radius: .65rem;
  padding: .6rem .85rem;
  font-weight: 500;
  font-size: .95rem;
  display: flex;
  align-items: center;
  gap: .55rem;
  line-height: 1.2;
  transition: background .18s ease, color .18s ease, box-shadow .18s ease;
  overflow: hidden;
}
.nav-link i { font-size: 1.15rem; transition: color .18s ease, transform .25s ease; }
.nav-link:before {
  content: "";
  position: absolute;
  left: 0; top: 8%; bottom: 8%;
  width: 4px;
  border-radius: 2px;
  background: linear-gradient(#0d47a1,#1976d2);
  opacity: 0;
  transform: translateX(-6px);
  transition: opacity .25s ease, transform .25s ease;
}
.nav-link:hover { background: #f3f6fa; }
.nav-link:hover i { transform: translateX(2px); }
.nav-link.active { background: #e7f1ff; color: #0d47a1; box-shadow: inset 0 0 0 1px #d5e6ff; }
.nav-link.active i { color: #0d47a1; }
.nav-link.active:before { opacity: 1; transform: translateX(0); }

// Logout button
button.btn-outline-secondary { border-radius: .65rem; font-weight: 500; position: relative; transition: background .18s ease, color .18s ease, border-color .18s ease; }
button.btn-outline-secondary i { transition: transform .25s ease; }
button.btn-outline-secondary:hover { background:#eef2f7; color:#0d47a1; border-color:#d0dae5; }
button.btn-outline-secondary:hover i { transform: translateX(3px); }

// Collapsed tweaks
:host(.collapsed) .sidebar .nav-link { justify-content: center; padding: .65rem .5rem; }
:host(.collapsed) .sidebar .nav-link i { margin: 0; }
// Reduce blue dominance: use pill highlight around icon only in collapsed active state.
:host(.collapsed) .sidebar .nav-link.active { background: transparent; color:#0d47a1; }
:host(.collapsed) .sidebar .nav-link.active i { background: transparent; box-shadow: none; padding: 0; }
:host(.collapsed) .sidebar .nav-link:before { display: none; }
:host(.collapsed) .sidebar .nav-link:hover { background: transparent; }
:host(.collapsed) .sidebar .nav-link:hover i:not(.bi-list) { color:#0d47a1; background:#f0f6ff; border-radius:10px; }

/* Improve icon contrast against active background when not collapsed */
.nav-link.active i { filter: none; }

/* Acessibilidade foco */
.nav-link:focus-visible { outline: 2px solid #1976d2; outline-offset: 2px; }

/* Darken icon color slightly for default state for better distinction */
.nav-link i { color:#425267; }

/* When collapsed, ensure all icons remain visible even if user custom styles override */
:host(.collapsed) .sidebar { overflow-x: hidden; }
:host(.collapsed) .sidebar .nav-link i { color:#425267; }

/* Remove previous blue dot accent */
:host(.collapsed) .sidebar .nav-link.active i:after { display:none; }

/* Add soft rounded background behind active icon when collapsed */
:host(.collapsed) .sidebar .nav-link.active i {
  background: linear-gradient(145deg,#e2efff,#d6e7fb 60%,#c9dbf5);
  border-radius: 12px;
  padding: .55rem .6rem; /* balanced square-ish */
  box-shadow: 0 2px 4px rgba(13,71,161,0.10), 0 0 0 1px #c1d8f3;
  color:#0d47a1;
}
:host(.collapsed) .sidebar .nav-link.active { color:#0d47a1; }
:host(.collapsed) .sidebar .nav-link.active:hover i { background: linear-gradient(145deg,#d9ebff,#cadef5 65%,#bed2ef); }
